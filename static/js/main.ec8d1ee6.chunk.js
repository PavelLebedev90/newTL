(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{119:function(t,e,n){"use strict";n.r(e);var i,c=n(0),a=n.n(c),o=n(28),r=n.n(o),s=(n(95),n(96),n(13)),u=n(158),d=n(162),l=n(171),f=n(2),j=a.a.memo((function(t){var e=Object(c.useState)(""),n=Object(s.a)(e,2),i=n[0],a=n[1],o=Object(c.useState)(null),r=Object(s.a)(o,2),j=r[0],b=r[1],T=function(){i.trim()?(t.addItem(i.trim()),a("")):b("Title is required")};return Object(f.jsxs)("div",{children:[Object(f.jsx)(d.a,{value:i,variant:"outlined",onChange:function(t){a(t.currentTarget.value)},onKeyPress:function(t){b(null),"Enter"===t.key&&T()},error:!!j,label:"Title",helperText:j,disabled:t.disabled}),Object(f.jsx)(l.a,{color:"primary",onClick:T,disabled:t.disabled,children:Object(f.jsx)(u.a,{})})]})})),b=a.a.memo((function(t){var e=Object(c.useState)(!0),n=Object(s.a)(e,2),i=n[0],a=n[1],o=Object(c.useState)(t.title),r=Object(s.a)(o,2),u=r[0],l=r[1],j=Object(c.useState)(""),b=Object(s.a)(j,2),T=b[0],O=b[1];return i||"loading"===t.entityStatus?Object(f.jsx)("span",{onDoubleClick:function(){"loading"!==t.entityStatus&&a(!i)},children:"loading"===t.entityStatus?"loading...":t.title}):Object(f.jsx)(d.a,{className:"editItem",variant:"outlined",value:u,onChange:function(t){l(t.currentTarget.value),O("")},onKeyPress:function(e){"Enter"===e.key&&u.trim()?(t.editStateItem(u.trim()),a(!i)):O("value not valid")},placeholder:T,autoFocus:!0})})),T=n(22),O=n(14),S=n(15),E=n(81),h=n.n(E).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1",withCredentials:!0,headers:{"api-key":"b9ab541c-e0c5-4e3f-a6cb-7e9f4deadb80"}});!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(i||(i={}));var p,m=function(t){return h.get("/todo-lists/".concat(t,"/tasks"))},_=function(t,e){return h.post("/todo-lists/".concat(t,"/tasks"),{title:e})},v=function(t,e,n){return h.put("/todo-lists/".concat(t,"/tasks/").concat(e),n)},A=function(t,e){return h.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},y=function(){return h.get("/todo-lists")},I=function(t){return h.post("/todo-lists",{title:t})},x=function(t,e){return h.put("/todo-lists/".concat(t),{title:e})},g=function(t){return h.delete("/todo-lists/".concat(t))};!function(t){t.SET_STATUS="SET_STATUS",t.SET_ERROR="SET_ERROR"}(p||(p={}));var L,D={status:"idle",error:null},k=function(t){return{type:p.SET_STATUS,payload:{status:t}}},C=function(t){return{type:p.SET_ERROR,payload:{error:t}}},N=n(5);!function(t){t.DELETETASK="DELETETASK",t.ADD_TASK="ADD_TASK",t.GET_TASKS="GET_TASKS",t.UPDATE_TASK="UPDATE_TASK",t.CHANGE_TASK_ENTITY_STATUS="CHANGE_TASK_ENTITY_STATUS"}(L||(L={}));var K,w={},G=function(t,e,n){return{type:L.CHANGE_TASK_ENTITY_STATUS,entityStatus:e,todolistId:t,taskId:n}},R=function(t){return function(e){F(t,"loading",e),m(t).then((function(n){e(function(t,e){return{type:L.GET_TASKS,tasks:t,todolistId:e}}(n.data.items,t)),F(t,"succeeded",e)})).catch((function(n){z(n,e),e(W(t,"failed"))}))}},U=function(t,e){return function(n){F(t,"loading",n),_(t,e).then((function(e){var i;0===e.data.resultCode?(n((i=e.data.data.item,{type:L.ADD_TASK,task:i})),F(t,"succeeded",n)):(n(C(e.data.messages[0])),F(t,"failed",n))})).catch((function(e){z(e,n),n(W(t,"failed"))}))}},H=function(t,e,n){return function(i,c){var a=c().tasks[t].filter((function(t){return t.id===e}))[0],o=Object(O.a)({description:a.description,status:a.status,priority:a.priority,startDate:a.startDate,deadline:a.deadline,title:a.title},n);Y(t,e,"loading",i),v(t,e,o).then((function(c){0===c.data.resultCode?(i(function(t,e,n){return{type:L.UPDATE_TASK,model:n,todolistId:t,taskId:e}}(t,e,n)),Y(t,e,"succeeded",i)):(i(C(c.data.messages[0])),Y(t,e,"failed",i))})).catch((function(n){z(n,i),i(G(t,"failed",e))}))}},P=function(t,e){return function(n){Y(t,e,"loading",n),A(t,e).then((function(){n(function(t,e){return{type:L.DELETETASK,id:t,taskID:e}}(t,e)),Y(t,e,"succeeded",n)})).catch((function(i){z(i,n),n(G(t,"failed",e))}))}},Y=function(t,e,n,i){i(k(n)),i(G(t,n,e))},F=function(t,e,n){n(k(e)),n(W(t,e))},z=function(t,e){e(C(t.message)),e(k("failed"))};!function(t){t.GET_TL="GET_TL",t.DELETE_TL="DELETE_TL",t.SET_FILTER="SET_FILTER",t.ADD_TL="ADD_TL",t.CHANGETITLE_TL="CHANGETITLE_TL",t.CHANGE_TODOLIST_ENTITY_STATUS="CHANGE_TODOLIST_ENTITY_STATUS"}(K||(K={}));var B=[],J=function(t,e){return{type:K.SET_FILTER,id:t,filter:e}},W=function(t,e){return{type:K.CHANGE_TODOLIST_ENTITY_STATUS,entityStatus:e,todolistId:t}},q=function(){return function(t){t(k("loading")),y().then((function(e){var n,i=e.data.map((function(t){return Object(O.a)(Object(O.a)({},t),{},{filter:(e=t.id,localStorage.getItem(e)||"all"),entityStatus:"idle"});var e}));t((n=i,{type:K.GET_TL,todolists:n})),t(k("succeeded"))})).catch((function(e){z(e,t)}))}},$=function(t){return function(e){e(k("loading")),I(t).then((function(t){var n;0===t.data.resultCode?(e((n=t.data.data.item,{type:K.ADD_TL,todo:n})),e(k("succeeded"))):(e(C(t.data.messages[0])),e(k("failed")))})).catch((function(t){z(t,e)}))}},M=function(t){return function(e){F(t,"loading",e),g(t).then((function(){e(function(t){return{type:K.DELETE_TL,id:t}}(t)),F(t,"succeeded",e)})).catch((function(n){z(n,e),e(W(t,"failed"))}))}},Q=function(t,e){return function(n){F(t,"loading",n),x(t,e).then((function(){n(function(t,e){return{type:K.CHANGETITLE_TL,id:t,title:e}}(t,e)),F(t,"succeeded",n)})).catch((function(e){z(e,n),n(W(t,"failed"))}))}},V=n(159),X=n(172),Z=n(168),tt=n(164),et=function(t){var e=t.task,n=Object(T.b)();return Object(f.jsxs)("div",{className:e.status===i.Completed?"is-done":"",children:[Object(f.jsx)(tt.a,{color:"primary",onChange:function(t){var c=t.currentTarget.checked?i.Completed:i.New;n(H(e.todoListId,e.id,{status:c}))},checked:e.status>0}),Object(f.jsx)(b,{title:e.title,editStateItem:function(t){n(H(e.todoListId,e.id,{title:t}))},entityStatus:e.entityStatus}),Object(f.jsx)(l.a,{onClick:function(){return n(P(e.todoListId,e.id))},disabled:"loading"===e.entityStatus,children:"loading"===e.entityStatus?Object(f.jsx)(X.a,{disableShrink:!0,size:17}):Object(f.jsx)(V.a,{})})]},e.id)},nt=a.a.memo((function(t){var e=t.todolistId,n=Object(T.c)((function(t){return t.tasks})),a=Object(T.c)((function(t){return t.todolists.filter((function(t){return t.id===e}))[0]})),o=Object(T.b)(),r=Object(T.c)((function(t){return t.todolists.filter((function(t){return t.id===e}))[0].entityStatus})),s=n[e];"active"===a.filter&&(s=s.filter((function(t){return t.status===i.New}))),"completed"===a.filter&&(s=s.filter((function(t){return t.status===i.Completed})));return Object(c.useEffect)((function(){o(R(e))}),[]),Object(f.jsxs)("div",{children:[Object(f.jsxs)("h3",{children:[Object(f.jsx)(b,{title:a.title,editStateItem:function(t){o(Q(e,t))},entityStatus:r}),Object(f.jsx)(l.a,{onClick:function(){o(M(e))},disabled:"loading"===r,children:"loading"===r?Object(f.jsx)(X.a,{disableShrink:!0,size:17}):Object(f.jsx)(V.a,{})})]}),Object(f.jsx)(j,{addItem:function(t){o(U(e,t))},disabled:"loading"===r}),Object(f.jsx)("div",{children:s.map((function(t){return Object(f.jsx)(et,{task:t},t.id)}))}),Object(f.jsxs)("div",{children:[Object(f.jsx)(Z.a,{variant:"all"===a.filter?"outlined":"text",onClick:function(){return o(J(e,"all"))},color:"inherit",children:"All"}),Object(f.jsx)(Z.a,{variant:"active"===a.filter?"outlined":"text",onClick:function(){return o(J(e,"active"))},color:"primary",children:"Active"}),Object(f.jsx)(Z.a,{variant:"completed"===a.filter?"outlined":"text",onClick:function(){return o(J(e,"completed"))},color:"secondary",children:"Completed"})]})]})})),it=n(173),ct=n(174),at=n(175),ot=n(176),rt=n(177),st=n(169),ut=n(170),dt=n(160),lt=n(166),ft=n(165),jt=a.a.forwardRef((function(t,e){return Object(f.jsx)(ft.a,Object(O.a)({elevation:6,ref:e,variant:"filled"},t))}));function bt(){var t=Object(T.b)(),e=Object(T.c)((function(t){return t.app.error})),n=function(e,n){"clickaway"!==n&&t(C(null))};return Object(f.jsx)(lt.a,{open:!!e,autoHideDuration:6e3,onClose:n,children:Object(f.jsx)(jt,{onClose:n,severity:"error",sx:{width:"100%"},children:e+" \ud83d\ude20"})})}var Tt=function(){var t=Object(T.b)(),e=Object(T.c)((function(t){return t.todolists})),n=Object(T.c)((function(t){return t.app.status})),i=Object(c.useCallback)((function(e){t($(e))}),[t]);return Object(c.useEffect)((function(){t(q())}),[]),Object(c.useEffect)((function(){t(function(t){return function(){t.map((function(t){return localStorage.setItem(t.id,t.filter)}))}}(e))}),[e]),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(bt,{}),Object(f.jsx)(it.a,{position:"static",children:Object(f.jsxs)(ct.a,{children:[Object(f.jsx)(l.a,{edge:"start",color:"inherit","area-label":"menu",children:Object(f.jsx)(dt.a,{})}),Object(f.jsx)(at.a,{variant:"h6",children:"News"}),Object(f.jsx)(Z.a,{color:"inherit",children:"Login"})]})}),"loading"===n&&Object(f.jsx)(ot.a,{color:"primary",style:{position:"relative"}}),Object(f.jsxs)(rt.a,{fixed:!0,children:[Object(f.jsx)(st.a,{container:!0,style:{padding:"20px"},children:Object(f.jsx)(j,{addItem:i})}),Object(f.jsx)(st.a,{container:!0,spacing:3,children:e.map((function(t){return Object(f.jsx)(st.a,{item:!0,children:Object(f.jsx)(ut.a,{style:{padding:"10px"},children:Object(f.jsx)(nt,{todolistId:t.id})})},t.id)}))})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ot=n(53),St=n(82),Et=Object(Ot.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case K.GET_TL:var n=Object(O.a)({},t);return e.todolists.forEach((function(t){n[t.id]=[]})),n;case L.GET_TASKS:return Object(O.a)(Object(O.a)({},t),{},Object(N.a)({},e.todolistId,e.tasks.map((function(t){return Object(O.a)(Object(O.a)({},t),{},{entityStatus:"idle"})}))));case K.DELETE_TL:var i=Object(O.a)({},t);return delete i[e.id],i;case K.ADD_TL:return Object(O.a)(Object(O.a)({},t),{},Object(N.a)({},e.todo.id,[]));case L.DELETETASK:return Object(O.a)(Object(O.a)({},t),{},Object(N.a)({},e.id,t[e.id].filter((function(t){return t.id!==e.taskID}))));case L.ADD_TASK:return Object(O.a)(Object(O.a)({},t),{},Object(N.a)({},e.task.todoListId,[Object(O.a)(Object(O.a)({},e.task),{},{entityStatus:"idle"})].concat(Object(S.a)(t[e.task.todoListId]))));case L.UPDATE_TASK:return Object(O.a)(Object(O.a)({},t),{},Object(N.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(O.a)(Object(O.a)({},t),e.model):t}))));case L.CHANGE_TASK_ENTITY_STATUS:return Object(O.a)(Object(O.a)({},t),{},Object(N.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(O.a)(Object(O.a)({},t),{},{entityStatus:e.entityStatus}):t}))));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case K.GET_TL:return e.todolists;case K.ADD_TL:return[Object(O.a)(Object(O.a)({},e.todo),{},{filter:"all",entityStatus:"idle"})].concat(Object(S.a)(t));case K.DELETE_TL:return t.filter((function(t){return t.id!==e.id}));case K.SET_FILTER:return t.map((function(t){return t.id===e.id?Object(O.a)(Object(O.a)({},t),{},{filter:e.filter}):t}));case K.CHANGETITLE_TL:return t.map((function(t){return t.id===e.id?Object(O.a)(Object(O.a)({},t),{},{title:e.title}):t}));case K.CHANGE_TODOLIST_ENTITY_STATUS:return t.map((function(t){return t.id===e.todolistId?Object(O.a)(Object(O.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case p.SET_STATUS:case p.SET_ERROR:return Object(O.a)(Object(O.a)({},t),e.payload);default:return t}}}),ht=Object(Ot.c)(Et,Object(Ot.a)(St.a));r.a.render(Object(f.jsx)(T.a,{store:ht,children:Object(f.jsx)(Tt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},95:function(t,e,n){},96:function(t,e,n){}},[[119,1,2]]]);
//# sourceMappingURL=main.ec8d1ee6.chunk.js.map