(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{31:function(t,e,n){},32:function(t,e,n){},58:function(t,e,n){"use strict";n.r(e);var c,i=n(0),o=n.n(i),r=n(10),a=n.n(r),s=(n(31),n(32),n(6)),u=n(1),d=o.a.memo((function(t){var e=Object(i.useState)(""),n=Object(s.a)(e,2),c=n[0],o=n[1],r=Object(i.useState)(null),a=Object(s.a)(r,2),d=a[0],l=a[1],f=function(){c.trim()?(t.addItem(c.trim()),o("")):l("Title is required")};return Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{value:c,onChange:function(t){o(t.currentTarget.value)},onKeyPress:function(t){l(null),"Enter"===t.key&&f()},className:d?"error":""}),Object(u.jsx)("button",{onClick:f,children:"+"}),d&&Object(u.jsx)("div",{className:"error-message",children:d})]})})),l=o.a.memo((function(t){var e=Object(i.useState)(!0),n=Object(s.a)(e,2),c=n[0],o=n[1],r=Object(i.useState)(t.title),a=Object(s.a)(r,2),d=a[0],l=a[1],f=Object(i.useState)(""),j=Object(s.a)(f,2),b=j[0],T=j[1];return c?Object(u.jsx)("span",{onDoubleClick:function(){o(!c)},children:t.title}):Object(u.jsx)("input",{className:"editItem",value:d,onChange:function(t){l(t.currentTarget.value),T("")},onKeyPress:function(e){"Enter"===e.key&&d.trim()?(t.editStateItem(d.trim()),o(!c)):T("value not valid")},placeholder:b,autoFocus:!0})})),f=n(4),j=n(12),b=n(2),T=n(25),O=n.n(T).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1",withCredentials:!0,headers:{"api-key":"b9ab541c-e0c5-4e3f-a6cb-7e9f4deadb80"}});!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(c||(c={}));var E,m=function(t){return O.get("/todo-lists/".concat(t,"/tasks"))},p=function(t,e){return O.post("/todo-lists/".concat(t,"/tasks"),{title:e})},h=function(t,e,n){return O.put("/todo-lists/".concat(t,"/tasks/").concat(e),n)},v=function(t,e){return O.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},I=function(){return O.get("/todo-lists")},L=function(t){return O.post("/todo-lists",{title:t})},D=function(t,e){return O.put("/todo-lists/".concat(t),{title:e})},k=function(t){return O.delete("/todo-lists/".concat(t))};!function(t){t.GET_TL="GET_TL",t.DELETE_TL="DELETE_TL",t.SET_FILTER="SET_FILTER",t.ADD_TL="ADD_TL",t.CHANGETITLE_TL="CHANGETITLE_TL"}(E||(E={}));var A,_=[],S=function(t,e){return{type:E.SET_FILTER,id:t,filter:e}},x=function(){return function(t){I().then((function(e){var n;t((n=e.data,{type:E.GET_TL,todolists:n}))}))}},y=function(t){return function(e){L(t).then((function(t){var n;e((n=t.data.data.item,{type:E.ADD_TL,todo:n}))}))}},g=function(t){return function(e){k(t).then((function(){e(function(t){return{type:E.DELETE_TL,id:t}}(t))}))}},C=function(t,e){return function(n){D(t,e).then((function(){n(function(t,e){return{type:E.CHANGETITLE_TL,id:t,title:e}}(t,e))}))}},K=n(5);!function(t){t.DELETETASK="DELETETASK",t.ADD_TASK="ADD_TASK",t.GET_TASKS="GET_TASKS",t.UPDATE_TASK="UPDATE_TASK"}(A||(A={}));var N={},w=function(t){return function(e){m(t).then((function(n){e(function(t,e){return{type:A.GET_TASKS,tasks:t,todolistId:e}}(n.data.items,t))}))}},G=function(t,e){return function(n){p(t,e).then((function(t){var e;n((e=t.data.data.item,{type:A.ADD_TASK,task:e}))}))}},P=function(t,e,n){return function(c,i){var o=i().tasks[t].filter((function(t){return t.id===e}))[0],r=Object(b.a)({description:o.description,status:o.status,priority:o.priority,startDate:o.startDate,deadline:o.deadline,title:o.title},n);h(t,e,r).then((function(){c(function(t,e,n){return{type:A.UPDATE_TASK,model:n,todolistId:t,taskId:e}}(t,e,n))}))}},F=function(t,e){return function(n){v(t,e).then((function(){n(function(t,e){return{type:A.DELETETASK,id:t,taskID:e}}(t,e))}))}},R=o.a.memo((function(t){var e=Object(f.c)((function(t){return t.tasks})),n=Object(f.c)((function(e){return e.todolists.filter((function(e){return e.id===t.todolistId}))[0]})),o=Object(f.b)(),r=e[t.todolistId];"active"===n.filter&&(r=r.filter((function(t){return t.status===c.New}))),"completed"===n.filter&&(r=r.filter((function(t){return t.status===c.Completed})));return Object(i.useEffect)((function(){o(w(t.todolistId))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsxs)("h3",{children:[Object(u.jsx)(l,{title:n.title,editStateItem:function(e){o(C(t.todolistId,e))}}),Object(u.jsx)("button",{onClick:function(){o(g(t.todolistId))},children:"deleteTL"})]}),Object(u.jsx)(d,{addItem:function(e){o(G(t.todolistId,e))}}),Object(u.jsx)("ul",{children:r.map((function(e){return Object(u.jsxs)("li",{className:e.status===c.Completed?"is-done":"",children:[Object(u.jsx)("input",{type:"checkbox",onChange:function(n){var i=n.currentTarget.checked?c.Completed:c.New;o(P(t.todolistId,e.id,{status:i}))},checked:e.status>0}),Object(u.jsx)(l,{title:e.title,editStateItem:function(n){o(P(t.todolistId,e.id,{title:n}))}}),Object(u.jsx)("button",{onClick:function(){return o(F(t.todolistId,e.id))},children:"x"})]},e.id)}))}),Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{className:"all"===n.filter?"active-filter":"",onClick:function(){return o(S(t.todolistId,"all"))},children:"All"}),Object(u.jsx)("button",{className:"active"===n.filter?"active-filter":"",onClick:function(){return o(S(t.todolistId,"active"))},children:"Active"}),Object(u.jsx)("button",{className:"completed"===n.filter?"active-filter":"",onClick:function(){return o(S(t.todolistId,"completed"))},children:"Completed"})]})]})}));var U=function(){var t=Object(f.b)(),e=Object(f.c)((function(t){return t.todolists})),n=Object(i.useCallback)((function(e){t(y(e))}),[t]);return Object(i.useEffect)((function(){t(x())}),[]),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(d,{addItem:n}),e.map((function(t){return Object(u.jsx)(R,{todolistId:t.id},t.id)}))]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=n(13),J=n(26),B=localStorage.getItem("state");B&&JSON.parse(B);var W=Object(H.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case E.GET_TL:var n=Object(b.a)({},t);return e.todolists.forEach((function(t){n[t.id]=[]})),n;case A.GET_TASKS:return Object(b.a)(Object(b.a)({},t),{},Object(K.a)({},e.todolistId,e.tasks));case E.DELETE_TL:var c=Object(b.a)({},t);return delete c[e.id],c;case E.ADD_TL:return Object(b.a)(Object(b.a)({},t),{},Object(K.a)({},e.todo.id,[]));case A.DELETETASK:return Object(b.a)(Object(b.a)({},t),{},Object(K.a)({},e.id,t[e.id].filter((function(t){return t.id!==e.taskID}))));case A.ADD_TASK:return Object(b.a)(Object(b.a)({},t),{},Object(K.a)({},e.task.todoListId,[e.task].concat(Object(j.a)(t[e.task.todoListId]))));case A.UPDATE_TASK:return Object(b.a)(Object(b.a)({},t),{},Object(K.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(b.a)(Object(b.a)({},t),e.model):t}))));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case E.GET_TL:return e.todolists.map((function(t){return Object(b.a)(Object(b.a)({},t),{},{filter:"all"})}));case E.ADD_TL:return[Object(b.a)(Object(b.a)({},e.todo),{},{filter:"all"})].concat(Object(j.a)(t));case E.DELETE_TL:return t.filter((function(t){return t.id!==e.id}));case E.SET_FILTER:return t.map((function(t){return t.id===e.id?Object(b.a)(Object(b.a)({},t),{},{filter:e.filter}):t}));case E.CHANGETITLE_TL:return t.map((function(t){return t.id===e.id?Object(b.a)(Object(b.a)({},t),{},{title:e.title}):t}));default:return t}}}),q=Object(H.c)(W,Object(H.a)(J.a));a.a.render(Object(u.jsx)(f.a,{store:q,children:Object(u.jsx)(U,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[58,1,2]]]);
//# sourceMappingURL=main.ad0a1466.chunk.js.map